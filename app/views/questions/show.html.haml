= render 'shared/lesson_title'
.user-basic-contaier
  .flex.mt16.ml8
    .m-question-card__question-num.mr8= "課題#{ @question.display_order }"
    .m-question-card__question-status= @question.question_status_of(current_user).decorate.status_label
  - if @question.image.present?
    = image_tag @question&.image_url, alt: @question.image_alt, class: 'a-question-image-on-user mt8'
  .pr8.pl8.mt8
    .a-question-text-box
      .a-text-primary= simple_format(@question.text)
  .mt24.mb24.m-submit-answer-button-wrap
    =link_to "提出する", new_question_answer_path(@question.id), class: "a-button-primary pb8 pt8"
  - if @answers.present?
    .a-border-secondary.mb24
    .pl8.pr8
      - @answers.each do |answer|
        .m-conversation-card
          .m-conversation-card__user-image
            - if current_user.image.present?
              = image_tag current_user.image_url, class: 'a-user-image--size100per'
              .a-text-secondary.a-text-small.mt8 あなた
            - else
              .a-user-image--no-image-size100per.a-text-xsmall No Image
              .a-text-secondary.a-text-small.mt8 あなた
          .m-conversation-card__card
            .m-conversation-card__text= simple_format(answer.text)
            .m-conversation-card__sub-info
              .m-conversation-card__submited-at
                .a-text-secondary= answer.decorate.submitted_at
              - if answer.answer_images.present?
                .m-conversation-card__image-link
                  = link_to '画像をみる', '#'

          - answer.comments.each do |comment|
            .comment_area__comment_text= "#{comment.text}"
            - if comment.image.present?
              .comment_area__comment_image
                = image_tag "#{comment.image}"
            .comment_area__bottom
              .comment_area__commented_at= "#{comment.decorate.commented_at}"
              .comment_area__teacher_name= "#{comment.teacher.name}"
  .a-border-secondary.mb24
  .mt24
  .pb16
    - if @status == 'unselected'
      .m-actually__buttons
        .m-question-card__button-right
          = will_not_do_button('しない', @question)
        .m-question-card__button-center
          = maybe_do_button('できたらする', @question)
        .m-question-card__button-left
          = will_do_button('する', @question)
    - elsif ['will_do', 'maybe_do', 'will_not_do'].include?(@status)
      .m-actually__buttons
        - unless @status == 'will_not_do'
          .m-actually__button
            = will_not_do_button('やっぱりしない', @question)
        - unless @status == 'maybe_do'
          .m-actually__button
            = maybe_do_button('できたらする', @question)
        - unless @status == 'will_do'
          .m-actually__button
            = will_do_button('やっぱりする', @question)
